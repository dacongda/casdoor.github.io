"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9989],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,b=p["".concat(l,".").concat(m)]||p[m]||c[m]||s;return n?a.createElement(b,i(i({ref:t},d),{},{components:n})):a.createElement(b,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var u=2;u<s;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},80765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const s={title:"Base de donn\xe9es",description:"Utiliser le Synchroniseur de base de donn\xe9es pour synchroniser les bases de donn\xe9es",keywords:["synchroniseur","base de donn\xe9es"],authors:["Marvelousp4"]},i=void 0,o={unversionedId:"syncer/Database",id:"syncer/Database",title:"Base de donn\xe9es",description:"Utiliser le Synchroniseur de base de donn\xe9es pour synchroniser les bases de donn\xe9es",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/syncer/Database.md",sourceDirName:"syncer",slug:"/syncer/Database",permalink:"/fr/docs/syncer/Database",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/syncer/Database.md",tags:[],version:"current",frontMatter:{title:"Base de donn\xe9es",description:"Utiliser le Synchroniseur de base de donn\xe9es pour synchroniser les bases de donn\xe9es",keywords:["synchroniseur","base de donn\xe9es"],authors:["Marvelousp4"]},sidebar:"tutorialSidebar",previous:{title:"Aper\xe7u",permalink:"/fr/docs/syncer/overview"},next:{title:"Keycloak",permalink:"/fr/docs/syncer/Keycloak"}},l={},u=[{value:"Synchroniseur de base de donn\xe9es",id:"synchroniseur-de-base-de-donn\xe9es",level:2}],d={toc:u};function c(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"synchroniseur-de-base-de-donn\xe9es"},"Synchroniseur de base de donn\xe9es"),(0,r.kt)("p",null,"La table des utilisateurs que nous avons cr\xe9\xe9e comme d\xe9mo est import\xe9e \xe0 partir du ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/xlsx/user_test.xlsx"},"fichier mod\xe8le XLSX"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Table",src:n(95899).Z,width:"2244",height:"241"})),(0,r.kt)("p",null,"Pour cr\xe9er un nouveau synchroniseur, allez \xe0 l'onglet ",(0,r.kt)("strong",{parentName:"p"},"Synchroniseurs")," et remplissez toutes les informations requises comme indiqu\xe9 ci-dessous. Ensuite, sauvegardez les modifications."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"modifier",src:n(2739).Z,width:"1758",height:"872"})),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"En g\xe9n\xe9ral, vous devez remplir au moins l'",(0,r.kt)("inlineCode",{parentName:"p"},"ID")," et le ",(0,r.kt)("inlineCode",{parentName:"p"},"Name")," dans les colonnes Casdoor. D'autres champs importants incluent ",(0,r.kt)("inlineCode",{parentName:"p"},"createdTime"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Password"),", et ",(0,r.kt)("inlineCode",{parentName:"p"},"DisplayName"),".")),(0,r.kt)("p",null,"Les champs suivants sont requis :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Organization")," : L'organisation \xe0 laquelle l'utilisateur sera import\xe9"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Name")," : Le nom du synchroniseur"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Type"),' : S\xe9lectionnez "base de donn\xe9es"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host")," : L'h\xf4te de la base de donn\xe9es originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Port")," : Le port de la base de donn\xe9es originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"User")," : Le nom d'utilisateur de la base de donn\xe9es originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Password")," : Le mot de passe de la base de donn\xe9es originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Database type")," : Toutes les bases de donn\xe9es support\xe9es par Xorm telles que MySQL, PostgreSQL, SQL Server, Oracle et SQLite"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Database")," : Le nom de la base de donn\xe9es originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Table")," : Le nom de la table des utilisateurs originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Colonnes de la table")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Column name")," : Le nom de la colonne des utilisateurs originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Column type")," : Le type de la colonne des utilisateurs originale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Casdoor Column")," : Le nom de la colonne utilisateur Casdoor")),(0,r.kt)("p",null,"Champs optionnels :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Is hashed")," : Indique s'il faut calculer la valeur de hachage. Lorsque cette option est activ\xe9e, le synchroniseur ne synchronisera l'utilisateur que si le champ de l'utilisateur dans la table d'origine est mis \xe0 jour. Si cette option est d\xe9sactiv\xe9e, le synchroniseur synchronisera toujours l'utilisateur m\xeame si seul le champ est mis \xe0 jour. En bref, l'utilisateur ne sera pas synchronis\xe9 tant que les champs impliqu\xe9s dans le calcul du hachage (option \"Is hashed\" activ\xe9e) ne sont pas mis \xe0 jour."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Is key")," : Indique s'il s'agit de la cl\xe9 primaire de l'utilisateur dans la table d'origine et dans la table Casdoor. Lors de la synchronisation de la base de donn\xe9es, cela est d\xe9termin\xe9 en fonction du champ dont l'option \"Is key\" est s\xe9lectionn\xe9e. Au moins l'un des boutons \"Is key\" pour les champs doit \xeatre s\xe9lectionn\xe9. Si aucun n'est s\xe9lectionn\xe9, la premi\xe8re option \"Is key\" est s\xe9lectionn\xe9e par d\xe9faut."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Avatar base URL")," : Lors de la synchronisation des utilisateurs, si l'",(0,r.kt)("strong",{parentName:"li"},"Avatar base URL")," n'est pas vide et que l'avatar de l'utilisateur d'origine ",(0,r.kt)("strong",{parentName:"li"},"user.avatar")," n'a pas le pr\xe9fixe \"http\", le nouvel avatar de l'utilisateur ",(0,r.kt)("strong",{parentName:"li"},"user.avatar")," sera remplac\xe9 par ",(0,r.kt)("strong",{parentName:"li"},"Avatar base URL + user.avatar"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Affiliation table")," : Elle est utilis\xe9e pour synchroniser l'affiliation de l'utilisateur \xe0 partir de cette table dans la base de donn\xe9es. Comme l'affiliation peut \xeatre un code de type int dans la \"Table d'affiliation\", elle doit \xeatre mapp\xe9e \xe0 une cha\xeene de caract\xe8res. R\xe9f\xe9rez-vous \xe0 ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_affiliation.go#L32"},"getAffiliationMap()"),". Casdoor a quelques champs redondants \xe0 emprunter, donc ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_util.go#L65"},"ici")," nous utilisons ",(0,r.kt)("inlineCode",{parentName:"li"},"score")," pour mapper le code int \xe0 un nom de cha\xeene.")),(0,r.kt)("p",null,"Une fois que vous avez configur\xe9 le synchroniseur, activez l'option ",(0,r.kt)("strong",{parentName:"p"},"Is enable")," et sauvegardez. Le synchroniseur commencera \xe0 fonctionner."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"utilisateurs",src:n(55155).Z,width:"1784",height:"163"})),(0,r.kt)("p",null,'Vous pouvez \xe9galement utiliser le bouton "Sync" pour la synchronisation de la base de donn\xe9es.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Mettre \xe0 jour")),(0,r.kt)("p",null,"Lorsque les ",(0,r.kt)("inlineCode",{parentName:"p"},"Table columns")," sont d\xe9finies comme indiqu\xe9 dans la figure suivante, l'op\xe9ration de mise \xe0 jour est effectu\xe9e."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"table_columns",src:n(67954).Z,width:"1755",height:"273"})),(0,r.kt)("p",null,"Si les donn\xe9es dans les deux tables sont diff\xe9rentes pour la cl\xe9, vous pouvez synchroniser les donn\xe9es entre les deux tables en fonction de la cl\xe9 primaire."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mettre \xe0 jour l'utilisateur dans la table originale")),(0,r.kt)("video",{src:"/video/syncer/update_user.mp4",controls:"controls",width:"100%"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mettre \xe0 jour l'utilisateur dans la table Casdoor")),(0,r.kt)("video",{src:"/video/syncer/update_casdoor.mp4",controls:"controls",width:"100%"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Ajouter")),(0,r.kt)("p",null,"Lorsque les ",(0,r.kt)("inlineCode",{parentName:"p"},"Table columns")," sont d\xe9finies comme indiqu\xe9 dans la figure suivante, l'op\xe9ration d'ajout est effectu\xe9e."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"table_columns",src:n(67954).Z,width:"1755",height:"273"})),(0,r.kt)("p",null,"Si le nombre de donn\xe9es entre les deux tables est diff\xe9rent, ajoutez les donn\xe9es \xe0 la table avec le nombre de donn\xe9es le plus bas en fonction de la cl\xe9 primaire."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ajouter un utilisateur dans la table originale")),(0,r.kt)("video",{src:"/video/syncer/add_user.mp4",controls:"controls",width:"100%"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ajouter un utilisateur dans la table Casdoor")),(0,r.kt)("video",{src:"/video/syncer/add_casdoor.mp4",controls:"controls",width:"100%"}))}c.isMDXComponent=!0},2739:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/syncer_database_edit-435b2fa3ce01e17c2b551c6729303c24.png"},95899:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/syncer_database_table-b7ed36d236791d6de4e3a0e5b7c5e75e.png"},67954:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/syncer_database_table_columns-6251bc6562ba8ab0e90d2e9e823d52f8.png"},55155:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/syncer_database_users-ac0f4230b3b21198217baa1ebf02ea7f.png"}}]);