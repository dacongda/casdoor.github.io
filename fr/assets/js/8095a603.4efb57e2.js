"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[9352],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(p,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},52890:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const o={title:"Flarum",description:"Using OAuth2 to connect various applications, like Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},i=void 0,l={unversionedId:"integration/php/Flarum",id:"integration/php/Flarum",title:"Flarum",description:"Using OAuth2 to connect various applications, like Flarum",source:"@site/docs/integration/php/Flarum.md",sourceDirName:"integration/php",slug:"/integration/php/Flarum",permalink:"/fr/docs/integration/php/Flarum",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/integration/php/Flarum.md",tags:[],version:"current",frontMatter:{title:"Flarum",description:"Using OAuth2 to connect various applications, like Flarum",keywords:["OAuth2","Flarum","IDP"],authors:["jakiuncle"]},sidebar:"tutorialSidebar",previous:{title:"Using Casdoor as an OAuth2 Server in ShowDoc",permalink:"/fr/docs/integration/php/showdoc"},next:{title:"Moodle",permalink:"/fr/docs/integration/php/Moodle"}},p={},s=[{value:"Step 1: Deploy Casdoor and Flarum",id:"step-1-deploy-casdoor-and-flarum",level:2},{value:"Step 2: Configure Casdoor application",id:"step-2-configure-casdoor-application",level:2},{value:"Step 3: Configure Flarum",id:"step-3-configure-flarum",level:2}],u={toc:s};function c(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," can use OAuth2 to connect various applications. In this example, we will show you how to use OAuth2 to connect Flarum to your applications."),(0,a.kt)("p",null,"Here are some configuration names you will need:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"CASDOOR_HOSTNAME"),": The domain name or IP where the Casdoor server is deployed."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Flarum_HOSTNAME"),": The domain name or IP where Flarum is deployed."),(0,a.kt)("h2",{id:"step-1-deploy-casdoor-and-flarum"},"Step 1: Deploy Casdoor and Flarum"),(0,a.kt)("p",null,"First, deploy ",(0,a.kt)("a",{parentName:"p",href:"/docs/basic/server-installation"},"Casdoor")," and ",(0,a.kt)("a",{parentName:"p",href:"https://flarum.org/"},"Flarum"),"."),(0,a.kt)("p",null,"After a successful deployment, make sure:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"You have downloaded the Flarum plugin ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,a.kt)("li",{parentName:"ol"},"Casdoor can be logged in and used normally."),(0,a.kt)("li",{parentName:"ol"},"You can set CASDOOR_HOSTNAME = ",(0,a.kt)("inlineCode",{parentName:"li"},"http://localhost:8000")," when deploying Casdoor in ",(0,a.kt)("inlineCode",{parentName:"li"},"prod")," mode. See ",(0,a.kt)("a",{parentName:"li",href:"https://casdoor.org/docs/basic/server-installation#production-mode"},"production mode"),".")),(0,a.kt)("h2",{id:"step-2-configure-casdoor-application"},"Step 2: Configure Casdoor application"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a new Casdoor application or use an existing one."),(0,a.kt)("li",{parentName:"ol"},"Find the redirect URL: ",(0,a.kt)("inlineCode",{parentName:"li"},"<CASDOOR_HOSTNAME>/auth/passport"),"."),(0,a.kt)("li",{parentName:"ol"},"Add the redirect URL to the Casdoor application: ",(0,a.kt)("img",{alt:"Redirect",src:n(37789).Z,width:"1854",height:"306"}))),(0,a.kt)("p",null,"On the application settings page, you will find two values: ",(0,a.kt)("inlineCode",{parentName:"p"},"Client ID")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Client secret"),". We will use these values in the next step."),(0,a.kt)("p",null,"Open your favorite browser and visit: ",(0,a.kt)("strong",{parentName:"p"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/.well-known/openid-configuration"),". You will see the OIDC configuration of Casdoor."),(0,a.kt)("h2",{id:"step-3-configure-flarum"},"Step 3: Configure Flarum"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the plugin ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/FriendsOfFlarum/passport"},"FoF Passport"),"."),(0,a.kt)("li",{parentName:"ol"},"Configure the app: ",(0,a.kt)("img",{alt:"configure",src:n(21921).Z,width:"921",height:"852"})),(0,a.kt)("li",{parentName:"ol"},"Find the Client ID and Client Secret in the Casdoor application page.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Token server URL"),": ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/login/oauth/access_token")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Authorization server URL"),": ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/login/oauth/authorize")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"UserInfo server URL"),": ",(0,a.kt)("strong",{parentName:"li"},"http://",(0,a.kt)("inlineCode",{parentName:"strong"},"CASDOOR_HOSTNAME"),"/api/get-account")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Scopes"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"address phone openid profile offline_access email"))),(0,a.kt)("p",null,"Log out of Flarum and test SSO.\n",(0,a.kt)("img",{alt:"Flarum Login",src:n(68471).Z,width:"800",height:"380"})))}c.isMDXComponent=!0},37789:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/RedirectURL-81f6e1bd4f914c1a3799f8a3c8aa2c67.png"},68471:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/login-34951d722b026dbd4fffa3697c2f8631.gif"},21921:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/ssoConfigure-beea0a8d5c89c724ff40c7121e0b79fd.png"}}]);