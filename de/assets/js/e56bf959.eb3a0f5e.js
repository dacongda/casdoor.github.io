"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[4841],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=r.createContext({}),d=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=d(e.components);return r.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=d(t),m=i,k=p["".concat(o,".").concat(m)]||p[m]||c[m]||a;return t?r.createElement(k,l(l({ref:n},u),{},{components:t})):r.createElement(k,l({ref:n},u))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,l=new Array(a);l[0]=p;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var d=2;d<a;d++)l[d]=t[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},72412:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var r=t(87462),i=(t(67294),t(3905));const a={title:"Datenbank",description:"Mit dem Datenbank-Synchronisierer Datenbanken synchronisieren",keywords:["Synchronisierer","Datenbank"],authors:["Marvelousp4"]},l=void 0,s={unversionedId:"syncer/Database",id:"syncer/Database",title:"Datenbank",description:"Mit dem Datenbank-Synchronisierer Datenbanken synchronisieren",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/syncer/Database.md",sourceDirName:"syncer",slug:"/syncer/Database",permalink:"/de/docs/syncer/Database",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/syncer/Database.md",tags:[],version:"current",frontMatter:{title:"Datenbank",description:"Mit dem Datenbank-Synchronisierer Datenbanken synchronisieren",keywords:["Synchronisierer","Datenbank"],authors:["Marvelousp4"]},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/de/docs/syncer/overview"},next:{title:"Keycloak",permalink:"/de/docs/syncer/Keycloak"}},o={},d=[{value:"Datenbank-Synchronisierer",id:"datenbank-synchronisierer",level:2}],u={toc:d};function c(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,r.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"datenbank-synchronisierer"},"Datenbank-Synchronisierer"),(0,i.kt)("p",null,"Die von uns als Demo erstellte Benutzertabelle wird aus der ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/xlsx/user_test.xlsx"},"Vorlagen-XLSX-Datei")," importiert."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Tabelle",src:t(95899).Z,width:"2244",height:"241"})),(0,i.kt)("p",null,"Um einen neuen Synchronisierer zu erstellen, gehen Sie zum ",(0,i.kt)("strong",{parentName:"p"},"Synchronisierer"),"-Tab und f\xfcllen Sie alle erforderlichen Informationen wie unten gezeigt aus. Dann speichern Sie die \xc4nderungen."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"bearbeiten",src:t(2739).Z,width:"1758",height:"872"})),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Im Allgemeinen m\xfcssen Sie mindestens die ",(0,i.kt)("inlineCode",{parentName:"p"},"ID")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"Name")," in den Casdoor-Spalten ausf\xfcllen. Andere wichtige Felder sind ",(0,i.kt)("inlineCode",{parentName:"p"},"createdTime"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Password")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"DisplayName"),".")),(0,i.kt)("p",null,"Die folgenden Felder sind erforderlich:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Organization"),": Die Organisation, zu der der Benutzer importiert wird"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Name"),": Der Name des Synchronisierers"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Type"),': W\xe4hlen Sie "Datenbank"'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Host"),": Der Host der urspr\xfcnglichen Datenbank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Port"),": Der Port der urspr\xfcnglichen Datenbank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"User"),": Der Benutzername der urspr\xfcnglichen Datenbank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Password"),": Das Passwort der urspr\xfcnglichen Datenbank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Database type"),": Alle von Xorm unterst\xfctzten Datenbanken wie MySQL, PostgreSQL, SQL Server, Oracle und SQLite"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Database"),": Der Name der urspr\xfcnglichen Datenbank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Table"),": Der Name der urspr\xfcnglichen Benutzertabelle"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Tabellenspalten")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Column name"),": Der Name der urspr\xfcnglichen Benutzerspalte"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Column type"),": Der Typ der urspr\xfcnglichen Benutzerspalte"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Casdoor Column"),": Der Name der Casdoor-Benutzerspalte")),(0,i.kt)("p",null,"Optionale Felder:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Is hashed"),': Ob ein Hash-Wert berechnet werden soll. Wenn diese Option aktiviert ist, wird der Synchronisierer den Benutzer nur synchronisieren, wenn das Feld des Benutzers in der Ursprungstabelle aktualisiert wird. Wenn diese Option deaktiviert ist, wird der Synchronisierer den Benutzer trotzdem synchronisieren, auch wenn nur das Feld aktualisiert wird. Kurz gesagt, der Benutzer wird nicht synchronisiert, bis die Felder, die an der Hash-Berechnung beteiligt sind (aktiviert "Is hashed"), aktualisiert werden.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Is key"),': Ob es der Prim\xe4rschl\xfcssel des Benutzers in der Ursprungstabelle und des Benutzers in der Casdoor-Tabelle ist. Bei der Synchronisierung der Datenbank wird dies anhand des Feldes bestimmt, dessen Option "Is key" ausgew\xe4hlt ist. Mindestens eine der "Is key"-Schaltfl\xe4chen f\xfcr Felder sollte ausgew\xe4hlt sein. Wenn keine ausgew\xe4hlt sind, wird standardm\xe4\xdfig die erste "Is key"-Option ausgew\xe4hlt.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Avatar base URL"),": Wenn Benutzer synchronisiert werden, wird der neue ",(0,i.kt)("strong",{parentName:"li"},"user.avatar")," durch ",(0,i.kt)("strong",{parentName:"li"},"Avatar base URL + user.avatar")," ersetzt, wenn die ",(0,i.kt)("strong",{parentName:"li"},"Avatar base URL")," nicht leer ist und der urspr\xfcngliche ",(0,i.kt)("strong",{parentName:"li"},"user.avatar"),' nicht das Pr\xe4fix "http" hat.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Affiliation table"),': Sie wird verwendet, um die Zugeh\xf6rigkeit des Benutzers aus dieser Tabelle in der Datenbank zu synchronisieren. Da die Zugeh\xf6rigkeit in der "Affiliation table" ein int-Typ-Code sein kann, muss sie auf einen String abgebildet werden. Siehe ',(0,i.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_affiliation.go#L32"},"getAffiliationMap()"),". Casdoor hat einige redundante Felder zum Ausleihen, also verwenden wir ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/casdoor/casdoor/blob/9f3ee275a8b747f914f0e74e897a79abeff96ccb/object/syncer_util.go#L65"},"hier")," ",(0,i.kt)("inlineCode",{parentName:"li"},"score"),", um den int-Code auf einen String-Namen abzubilden.")),(0,i.kt)("p",null,"Sobald Sie den Synchronisierer konfiguriert haben, aktivieren Sie die Option ",(0,i.kt)("strong",{parentName:"p"},"Is enable")," und speichern Sie. Der Synchronisierer wird zu arbeiten beginnen."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Benutzer",src:t(55155).Z,width:"1784",height:"163"})),(0,i.kt)("p",null,'Sie k\xf6nnen auch die Schaltfl\xe4che "Sync" f\xfcr die Datenbanksynchronisierung verwenden.'),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Aktualisieren")),(0,i.kt)("p",null,"Wenn die ",(0,i.kt)("inlineCode",{parentName:"p"},"Table columns")," wie in der folgenden Abbildung eingestellt sind, wird die Aktualisierungsoperation durchgef\xfchrt."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"table_columns",src:t(67954).Z,width:"1755",height:"273"})),(0,i.kt)("p",null,"Wenn die Daten in den beiden Tabellen f\xfcr den Schl\xfcssel unterschiedlich sind, k\xf6nnen Sie die Daten zwischen den beiden Tabellen basierend auf dem Prim\xe4rschl\xfcssel synchronisieren."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Aktualisieren des Benutzers in der urspr\xfcnglichen Tabelle")),(0,i.kt)("video",{src:"/video/syncer/update_user.mp4",controls:"controls",width:"100%"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Aktualisieren des Benutzers in der Casdoor-Tabelle")),(0,i.kt)("video",{src:"/video/syncer/update_casdoor.mp4",controls:"controls",width:"100%"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Hinzuf\xfcgen")),(0,i.kt)("p",null,"Wenn die ",(0,i.kt)("inlineCode",{parentName:"p"},"Table columns")," wie in der folgenden Abbildung eingestellt sind, wird die Hinzuf\xfcgungsoperation durchgef\xfchrt."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"table_columns",src:t(67954).Z,width:"1755",height:"273"})),(0,i.kt)("p",null,"Wenn die Anzahl der Daten zwischen den beiden Tabellen unterschiedlich ist, f\xfcgen Sie die Daten der Tabelle mit der geringeren Anzahl von Daten basierend auf dem Prim\xe4rschl\xfcssel hinzu."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Benutzer in der urspr\xfcnglichen Tabelle hinzuf\xfcgen")),(0,i.kt)("video",{src:"/video/syncer/add_user.mp4",controls:"controls",width:"100%"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Benutzer in der Casdoor-Tabelle hinzuf\xfcgen")),(0,i.kt)("video",{src:"/video/syncer/add_casdoor.mp4",controls:"controls",width:"100%"}))}c.isMDXComponent=!0},2739:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/syncer_database_edit-435b2fa3ce01e17c2b551c6729303c24.png"},95899:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/syncer_database_table-b7ed36d236791d6de4e3a0e5b7c5e75e.png"},67954:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/syncer_database_table_columns-6251bc6562ba8ab0e90d2e9e823d52f8.png"},55155:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/syncer_database_users-ac0f4230b3b21198217baa1ebf02ea7f.png"}}]);