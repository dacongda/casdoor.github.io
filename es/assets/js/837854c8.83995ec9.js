"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[7623],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>u});var r=t(67294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=r.createContext({}),d=function(e){var a=r.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):p(p({},a),e)),t},c=function(e){var a=d(e.components);return r.createElement(l.Provider,{value:a},e.children)},s={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=d(t),u=n,h=m["".concat(l,".").concat(u)]||m[u]||s[u]||o;return t?r.createElement(h,p(p({ref:a},c),{},{components:t})):r.createElement(h,p({ref:a},c))}));function u(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=t.length,p=new Array(o);p[0]=m;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,p[1]=i;for(var d=2;d<o;d++)p[d]=t[d];return r.createElement.apply(null,p)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2941:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>p,default:()=>s,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=t(87462),n=(t(67294),t(3905));const o={title:"WeChat Pay",description:"Agrega el proveedor de pago WeChat Pay a tu aplicaci\xf3n",keywords:["WeChat Pay","pago"],authors:["Wrapping-2000","Chinoholo0807"]},p=void 0,i={unversionedId:"provider/payment/WeChatPay",id:"provider/payment/WeChatPay",title:"WeChat Pay",description:"Agrega el proveedor de pago WeChat Pay a tu aplicaci\xf3n",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/provider/payment/WeChatPay.md",sourceDirName:"provider/payment",slug:"/provider/payment/WeChatPay",permalink:"/es/docs/provider/payment/WeChatPay",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/payment/WeChatPay.md",tags:[],version:"current",frontMatter:{title:"WeChat Pay",description:"Agrega el proveedor de pago WeChat Pay a tu aplicaci\xf3n",keywords:["WeChat Pay","pago"],authors:["Wrapping-2000","Chinoholo0807"]},sidebar:"tutorialSidebar",previous:{title:"Alipay",permalink:"/es/docs/provider/payment/Alipay"},next:{title:"Captcha",permalink:"/es/docs/category/captcha"}},l={},d=[{value:"Paso 1. Preparaci\xf3n",id:"paso-1-preparaci\xf3n",level:2},{value:"1.1 Obtener la clave API v3",id:"11-obtener-la-clave-api-v3",level:3},{value:"1.2 Obtener el Certificado del Comerciante",id:"12-obtener-el-certificado-del-comerciante",level:3},{value:"1.3 Obtener el ID del Comerciante y el ID de la App",id:"13-obtener-el-id-del-comerciante-y-el-id-de-la-app",level:3},{value:"Paso 2.  Crear un proveedor de pago WeChat Pay",id:"paso-2--crear-un-proveedor-de-pago-wechat-pay",level:2},{value:"Paso 3. Agregar el proveedor de pago WeChat Pay para tu producto",id:"paso-3-agregar-el-proveedor-de-pago-wechat-pay-para-tu-producto",level:2},{value:"Soporte para pago JSAPI",id:"soporte-para-pago-jsapi",level:2}],c={toc:d};function s(e){let{components:a,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"paso-1-preparaci\xf3n"},"Paso 1. Preparaci\xf3n"),(0,n.kt)("p",null,"Primero, necesitas tener una cuenta de comerciante en ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/index.php/public/wechatpay_en"},"Plataforma de Comerciantes WeChat"),"."),(0,n.kt)("p",null,"Antes de acceder a WeChat Pay, hay algunas preparaciones que deben realizarse."),(0,n.kt)("p",null,"Puedes consultar la documentaci\xf3n ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/native-payment/preparation.html"},"preparaci\xf3n antes del acceso")," para m\xe1s informaci\xf3n."),(0,n.kt)("h3",{id:"11-obtener-la-clave-api-v3"},"1.1 Obtener la clave API v3"),(0,n.kt)("p",null,"Inicia sesi\xf3n en la Plataforma de Comerciantes WeChat, selecciona ",(0,n.kt)("inlineCode",{parentName:"p"},"Configuraci\xf3n de la cuenta > Seguridad API > Configurar secreto APIv3"),", y haz clic en ",(0,n.kt)("inlineCode",{parentName:"p"},"Configurar secreto APIv3")," para obtener la ",(0,n.kt)("inlineCode",{parentName:"p"},"clave API v3"),"."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"clave api wechat v3",src:t(84888).Z,width:"2400",height:"1430"})),(0,n.kt)("p",null,"C\xf3mo obtener ",(0,n.kt)("inlineCode",{parentName:"p"},"clave API v3")," : ",(0,n.kt)("a",{parentName:"p",href:"https://kf.qq.com/faq/180830E36vyQ180830AZFZvu.html"},"Configuraci\xf3n de la clave APIv3")),(0,n.kt)("h3",{id:"12-obtener-el-certificado-del-comerciante"},"1.2 Obtener el Certificado del Comerciante"),(0,n.kt)("p",null,"Puedes iniciar sesi\xf3n en la Plataforma de Comerciantes WeChat y seleccionar ",(0,n.kt)("inlineCode",{parentName:"p"},"Configuraci\xf3n de la cuenta > Seguridad API > Certificado API")," para descargar el certificado."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"certificado de comerciante wechat",src:t(22923).Z,width:"2426",height:"1506"})),(0,n.kt)("p",null,"Despu\xe9s de descargar el certificado, obt\xe9n el ",(0,n.kt)("inlineCode",{parentName:"p"},"N\xfamero de Serie del Certificado")," de acuerdo a ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay7_0.shtml#part-5"},"C\xf3mo ver el N\xfamero de Serie del Certificado")," y la ",(0,n.kt)("inlineCode",{parentName:"p"},"Clave Privada")," de acuerdo a ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/wiki/doc/apiv3/wechatpay/wechatpay3_1.shtml"},"C\xf3mo obtener la Clave Privada del Certificado"),"."),(0,n.kt)("p",null,"Luego, crea un ",(0,n.kt)("inlineCode",{parentName:"p"},"Cert")," en Casdoor y completa la informaci\xf3n necesaria."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"wechat_cert",src:t(28673).Z,width:"3301",height:"1631"})),(0,n.kt)("h3",{id:"13-obtener-el-id-del-comerciante-y-el-id-de-la-app"},"1.3 Obtener el ID del Comerciante y el ID de la App"),(0,n.kt)("p",null,"C\xf3mo obtener ",(0,n.kt)("inlineCode",{parentName:"p"},"ID del Comerciante")," : ",(0,n.kt)("a",{parentName:"p",href:"https://kf.qq.com/faq/200729EZ7fEj200729aumYR7.html"},"Gu\xeda de Consulta del ID del Comerciante de WeChat Pay")),(0,n.kt)("p",null,"C\xf3mo obtener ",(0,n.kt)("inlineCode",{parentName:"p"},"ID de la App")," : ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/static/pay_setting/appid_protocol.shtml"},"Gu\xeda de Consulta del APPID de WeChat Pay")),(0,n.kt)("h2",{id:"paso-2--crear-un-proveedor-de-pago-wechat-pay"},"Paso 2.  Crear un proveedor de pago WeChat Pay"),(0,n.kt)("p",null,"A continuaci\xf3n, crea un proveedor de pago WeChat Pay en Casdoor completando la informaci\xf3n necesaria."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Nombre"),(0,n.kt)("th",{parentName:"tr",align:null},"Nombre en WeChat Pay"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Category"),(0,n.kt)("td",{parentName:"tr",align:null},"elige ",(0,n.kt)("inlineCode",{parentName:"td"},"Pago"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Type"),(0,n.kt)("td",{parentName:"tr",align:null},"elige ",(0,n.kt)("inlineCode",{parentName:"td"},"WeChat Pay"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"ID del Comerciante")," obtenido del Paso 1.3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Client secret"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"clave API v3")," obtenida del Paso 1.1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"App ID"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"ID de la App")," obtenido del Paso 1.3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Cert"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"Cert")," configurado en el Paso 1.2")))),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"proveedor de pago wechat",src:t(55713).Z,width:"1513",height:"1032"})),(0,n.kt)("h2",{id:"paso-3-agregar-el-proveedor-de-pago-wechat-pay-para-tu-producto"},"Paso 3. Agregar el proveedor de pago WeChat Pay para tu producto"),(0,n.kt)("p",null,"Finalmente, agrega el proveedor de pago WeChat Pay para tu producto para que los usuarios puedan comprar el producto utilizando WeChat Pay."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"agregar proveedor de pago wechat pay para producto",src:t(83255).Z,width:"3377",height:"1534"})),(0,n.kt)("video",{src:"/video/provider/payment/use_wechatpay_buy_product.mp4",controls:"controls",width:"100%"}),(0,n.kt)("h2",{id:"soporte-para-pago-jsapi"},"Soporte para pago JSAPI"),(0,n.kt)("p",null,"Actualmente, Casdoor soporta ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/jsapi-payment/introduction.html"},"pago JSAPI")," y ",(0,n.kt)("a",{parentName:"p",href:"https://pay.weixin.qq.com/docs/merchant/products/native-payment/introduction.html"},"pago Nativo")," en WeChat Pay."),(0,n.kt)("p",null,"Para soportar el pago JSAPI, debes configurar un ",(0,n.kt)("a",{parentName:"p",href:"/docs/provider/oauth/Wechat"},"Proveedor OAuth de WeChat")," que soporte ",(0,n.kt)("inlineCode",{parentName:"p"},"Plataforma de Medios de WeChat"),". El ",(0,n.kt)("inlineCode",{parentName:"p"},"ID de Cliente 2")," del Proveedor OAuth de WeChat y el ",(0,n.kt)("inlineCode",{parentName:"p"},"ID de la App")," del Proveedor de Pago WeChat Pay deben ser el mismo."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"relaci\xf3n entre el proveedor de pago wechat pay y el proveedor oauth wechat",src:t(63691).Z,width:"1975",height:"1158"})),(0,n.kt)("p",null,"Despu\xe9s de iniciar sesi\xf3n a trav\xe9s de WeChat (en el escenario m\xf3vil: por ejemplo, el navegador integrado de WeChat dentro de la aplicaci\xf3n m\xf3vil de WeChat), los usuarios pueden comprar productos utilizando WeChat Pay basado en el pago JSAPI."),(0,n.kt)("video",{src:"/video/provider/payment/use_wechatpay_via_jsapi.mp4",controls:"controls",width:"100%",align:"center"}))}s.isMDXComponent=!0},84888:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_apikey_v3-c95a86dcc7ab4dd7bbca9df233f0167f.png"},28673:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_cert-a4e0caadc44c30564ff97d9bc60d2499.png"},63691:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_jsapi_conf-18697c593f4bcdc7200d613cad1e1cb8.png"},22923:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_mch_cert-84e41b42ce7a3931f69bf07bb5376a9f.png"},55713:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_payment_provider-a0467c48adc3d33665c6ad4013ad9184.png"},83255:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/wechat_product-01ff65aff94711e2e1b53fa2e9593c8b.png"}}]);