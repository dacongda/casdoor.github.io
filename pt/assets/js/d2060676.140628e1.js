"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[3662],{3905:(e,a,o)=>{o.d(a,{Zo:()=>p,kt:()=>u});var t=o(67294);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function d(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=t.createContext({}),l=function(e){var a=t.useContext(s),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},p=function(e){var a=l(e.components);return t.createElement(s.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var o=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),c=l(o),u=n,k=c["".concat(s,".").concat(u)]||c[u]||m[u]||r;return o?t.createElement(k,i(i({ref:a},p),{},{components:o})):t.createElement(k,i({ref:a},p))}));function u(e,a){var o=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=c;var d={};for(var s in a)hasOwnProperty.call(a,s)&&(d[s]=a[s]);d.originalType=e,d.mdxType="string"==typeof e?e:n,i[1]=d;for(var l=2;l<r;l++)i[l]=o[l];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}c.displayName="MDXCreateElement"},65020:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var t=o(87462),n=(o(67294),o(3905));const r={title:"Instala\xe7\xe3o do Servidor",description:"Instalar e configurar o servidor Casdoor",keywords:["Servidor Casdoor","instala\xe7\xe3o","configura\xe7\xe3o"],authors:["hsluoyz"]},i=void 0,d={unversionedId:"basic/server-installation",id:"basic/server-installation",title:"Instala\xe7\xe3o do Servidor",description:"Instalar e configurar o servidor Casdoor",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/basic/server-installation.mdx",sourceDirName:"basic",slug:"/basic/server-installation",permalink:"/pt/docs/basic/server-installation",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/basic/server-installation.mdx",tags:[],version:"current",frontMatter:{title:"Instala\xe7\xe3o do Servidor",description:"Instalar e configurar o servidor Casdoor",keywords:["Servidor Casdoor","instala\xe7\xe3o","configura\xe7\xe3o"],authors:["hsluoyz"]},sidebar:"tutorialSidebar",previous:{title:"Conceitos Principais",permalink:"/pt/docs/basic/core-concepts"},next:{title:"(Opcional) Experimente com Docker",permalink:"/pt/docs/basic/try-with-docker"}},s={},l=[{value:"Requisitos",id:"requisitos",level:2},{value:"Sistema Operacional",id:"sistema-operacional",level:3},{value:"Ambiente",id:"ambiente",level:3},{value:"Banco de dados",id:"banco-de-dados",level:3},{value:"Baixar",id:"baixar",level:2},{value:"Configura\xe7\xe3o",id:"configura\xe7\xe3o",level:2},{value:"Configurar Banco de Dados",id:"configurar-banco-de-dados",level:3},{value:"MySQL",id:"mysql",level:4},{value:"PostgreSQL",id:"postgresql",level:4},{value:"SQLite3",id:"sqlite3",level:4},{value:"Via arquivo Ini",id:"via-arquivo-ini",level:3},{value:"Via Vari\xe1veis de Ambiente",id:"via-vari\xe1veis-de-ambiente",level:3},{value:"Executar",id:"executar",level:2},{value:"Modo de Desenvolvimento",id:"modo-de-desenvolvimento",level:3},{value:"Backend",id:"backend",level:4},{value:"Frontend",id:"frontend",level:4},{value:"Modo de Produ\xe7\xe3o",id:"modo-de-produ\xe7\xe3o",level:3},{value:"Backend",id:"backend-1",level:4},{value:"Frontend",id:"frontend-1",level:4}],p={toc:l};function m(e){let{components:a,...r}=e;return(0,n.kt)("wrapper",(0,t.Z)({},p,r,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"requisitos"},"Requisitos"),(0,n.kt)("h3",{id:"sistema-operacional"},"Sistema Operacional"),(0,n.kt)("p",null,"Todos os principais sistemas operacionais, incluindo Windows, Linux e macOS, s\xe3o suportados."),(0,n.kt)("h3",{id:"ambiente"},"Ambiente"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://go.dev/dl/"},"Go 1.17+")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nodejs.org"},"Node.js LTS (18)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://classic.yarnpkg.com/en/docs/install"},"Yarn 1.x"))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Sugerimos fortemente o uso de ",(0,n.kt)("a",{parentName:"p",href:"https://classic.yarnpkg.com/en/docs/install"},"Yarn 1.x")," para executar e construir o frontend do Casdoor. Usar NPM pode causar problemas de estilo da UI. Para mais detalhes, veja: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/issues/294"},"casdoor#294"),".")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Se sua rede falhar ao sincronizar diretamente os pacotes de depend\xeancia do Go com sucesso, voc\xea precisar\xe1 usar um proxy Go configurando a vari\xe1vel de ambiente GOPROXY. Sugerimos fortemente o uso de: ",(0,n.kt)("a",{parentName:"p",href:"https://goproxy.cn/"},"https://goproxy.cn/"))),(0,n.kt)("h3",{id:"banco-de-dados"},"Banco de dados"),(0,n.kt)("p",null,"Casdoor usa ",(0,n.kt)("a",{parentName:"p",href:"https://xorm.io/"},"XORM")," para se comunicar com o banco de dados. Baseado no ",(0,n.kt)("a",{parentName:"p",href:"https://gitea.com/xorm/xorm#drivers-support"},"Suporte a Drivers do Xorm"),", o Casdoor atualmente fornece suporte para os seguintes bancos de dados:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"MySQL")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"MariaDB")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"PostgreSQL")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CockroachDB")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SQL Server")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Oracle")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SQLite 3")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"TiDB"))),(0,n.kt)("h2",{id:"baixar"},"Baixar"),(0,n.kt)("p",null,"O c\xf3digo-fonte do Casdoor est\xe1 hospedado no GitHub: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor"},"https://github.com/casdoor/casdoor"),". Tanto o c\xf3digo backend em Go quanto o c\xf3digo frontend em React est\xe3o contidos em um \xfanico reposit\xf3rio."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Nome"),(0,n.kt)("th",{parentName:"tr",align:null},"Descri\xe7\xe3o"),(0,n.kt)("th",{parentName:"tr",align:null},"Idioma"),(0,n.kt)("th",{parentName:"tr",align:null},"C\xf3digo-fonte"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Frontend"),(0,n.kt)("td",{parentName:"tr",align:null},"UI de frontend web para Casdoor"),(0,n.kt)("td",{parentName:"tr",align:null},"JavaScript + React"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor/tree/master/web"},"https://github.com/casdoor/casdoor/tree/master/web"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Backend"),(0,n.kt)("td",{parentName:"tr",align:null},"Backend de API RESTful para Casdoor"),(0,n.kt)("td",{parentName:"tr",align:null},"Golang + Beego + XORM"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/casdoor/casdoor"},"https://github.com/casdoor/casdoor"))))),(0,n.kt)("p",null,"Casdoor suporta ",(0,n.kt)("inlineCode",{parentName:"p"},"Go Modules"),". Para baixar o c\xf3digo, basta clonar o c\xf3digo usando git:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd path/to/folder\ngit clone https://github.com/casdoor/casdoor\n")),(0,n.kt)("h2",{id:"configura\xe7\xe3o"},"Configura\xe7\xe3o"),(0,n.kt)("h3",{id:"configurar-banco-de-dados"},"Configurar Banco de Dados"),(0,n.kt)("p",null,"Casdoor suporta MySQL, MSSQL, SQLite3 e PostgreSQL. Por padr\xe3o, o Casdoor usa MySQL."),(0,n.kt)("h4",{id:"mysql"},"MySQL"),(0,n.kt)("p",null,"Casdoor armazena informa\xe7\xf5es de usu\xe1rio, n\xf3 e t\xf3pico em um banco de dados MySQL chamado ",(0,n.kt)("inlineCode",{parentName:"p"},"casdoor"),". Se o banco de dados n\xe3o existir, ele deve ser criado manualmente. A string de conex\xe3o do DB pode ser especificada em: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf"},"https://github.com/casdoor/casdoor/blob/master/conf/app.conf")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"driverName = mysql\ndataSourceName = root:123456@tcp(localhost:3306)/\ndbName = casdoor\n")),(0,n.kt)("h4",{id:"postgresql"},"PostgreSQL"),(0,n.kt)("p",null,"Antes de executar o Casdoor, voc\xea precisa preparar manualmente um banco de dados para PostgreSQL, pois o Casdoor requer a sele\xe7\xe3o de um banco de dados ao abrir o Postgres com xorm."),(0,n.kt)("p",null,"Supondo que voc\xea j\xe1 tenha preparado um banco de dados chamado ",(0,n.kt)("inlineCode",{parentName:"p"},"casdoor"),", voc\xea deve especificar ",(0,n.kt)("inlineCode",{parentName:"p"},"app.conf")," assim:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},'driverName = postgres\ndataSourceName = "user=postgres password=postgres host=localhost port=5432 sslmode=disable dbname=casdoor"\ndbName = casdoor\n')),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"Para PostgreSQL, certifique-se de que ",(0,n.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"dataSourceName")," tenha um ",(0,n.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"dbName")," n\xe3o vazio e tamb\xe9m ",(0,n.kt)("a",{parentName:"mdxAdmonitionTitle",href:"https://github.com/casdoor/casdoor/issues/2127"},"duplicar")," o nome do banco de dados para o campo ",(0,n.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"dbname")," como mostrado no exemplo acima. :::"),(0,n.kt)("h4",{parentName:"admonition",id:"cockroachdb"},"CockroachDB"),(0,n.kt)("p",{parentName:"admonition"},"CockroachDB tamb\xe9m pode ser usado com o driver do PostgreSQL e tem a mesma configura\xe7\xe3o que o PostgreSQL."),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-ini"},'driverName = postgres\ndataSourceName = "user=postgres password=postgres host=localhost port=5432 sslmode=disable dbname=casdoor serial_normalization=virtual_sequence"\ndbName = casdoor\n'))),(0,n.kt)("h4",{id:"sqlite3"},"SQLite3"),(0,n.kt)("p",null,"Para configurar o SQLite3, voc\xea deve especificar ",(0,n.kt)("inlineCode",{parentName:"p"},"app.conf")," assim:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},'driverName = sqlite\ndataSourceName = "file:casdoor.db?cache=shared"\ndbName = casdoor\n')),(0,n.kt)("h3",{id:"via-arquivo-ini"},"Via arquivo Ini"),(0,n.kt)("p",null,"Casdoor pode ser configurado via um \xfanico arquivo: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casdoor/casdoor/blob/master/conf/app.conf"},(0,n.kt)("strong",{parentName:"a"},"conf/app.conf")),", que por padr\xe3o cont\xe9m o seguinte conte\xfado:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},'appname = casdoor\nhttpport = 8000\nrunmode = dev\nSessionOn = true\ncopyrequestbody = true\ndriverName = mysql\ndataSourceName = root:123456@tcp(localhost:3306)/\ndbName = casdoor\ntableNamePrefix =\nshowSql = false\nredisEndpoint =\ndefaultStorageProvider =\nisCloudIntranet = false\nauthState = "casdoor"\nsocks5Proxy = "127.0.0.1:10808"\nverificationCodeTimeout = 10\ninitScore = 2000\nlogPostOnly = true\norigin = "https://door.casdoor.com"\nstaticBaseUrl = "https://cdn.casbin.org"\nenableGzip = true\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"appname")," \xe9 o nome da aplica\xe7\xe3o, que atualmente n\xe3o tem uso pr\xe1tico."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"httpport")," \xe9 a porta que sua aplica\xe7\xe3o backend est\xe1 ouvindo."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"runmode")," pode ser definido como ",(0,n.kt)("inlineCode",{parentName:"li"},"dev")," ou ",(0,n.kt)("inlineCode",{parentName:"li"},"prod"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SessionOn")," determina se a sess\xe3o ser\xe1 habilitada e est\xe1 habilitada por padr\xe3o."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"driverName"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"dataSourceName")," e ",(0,n.kt)("inlineCode",{parentName:"li"},"dbName")," foram introduzidos anteriormente. Por favor, veja ",(0,n.kt)("a",{parentName:"li",href:"#configure-database"},"Configurar Banco de Dados")," para detalhes."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"verificationCodeTimeout")," define o tempo de expira\xe7\xe3o do c\xf3digo de verifica\xe7\xe3o. Ap\xf3s a expira\xe7\xe3o, o usu\xe1rio precisa obt\xea-lo novamente.")),(0,n.kt)("p",null,"Como iniciante, voc\xea s\xf3 precisa modificar dois itens: ",(0,n.kt)("inlineCode",{parentName:"p"},"driverName")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"dataSourceName")," com base no seu banco de dados. Este banco de dados ser\xe1 usado pelo Casdoor para armazenar todos os dados, incluindo usu\xe1rios, organiza\xe7\xf5es e aplica\xe7\xf5es."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"tableNamePrefix")," \xe9 o prefixo da tabela ao usar um adaptador."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"showSql")," determina se as instru\xe7\xf5es SQL ser\xe3o mostradas no logger se o n\xedvel de log for maior que INFO."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"redisEndpoint")," \xe9 o endpoint do Redis usado pelo armazenamento de sess\xe3o do Beego. Se este par\xe2metro estiver vazio, os dados da sess\xe3o ser\xe3o armazenados localmente como arquivos na pasta ",(0,n.kt)("inlineCode",{parentName:"li"},"./tmp"),". Para usar o Redis como armazenamento de sess\xe3o do Beego, o valor seria algo como: ",(0,n.kt)("inlineCode",{parentName:"li"},"redis.example.com:6379"),". Se o Redis estiver implantado localmente, voc\xea pode usar ",(0,n.kt)("inlineCode",{parentName:"li"},"localhost:6379"),". Se a senha do Redis estiver habilitada, use ",(0,n.kt)("inlineCode",{parentName:"li"},"redis.example.com:6379,db,senha"),". Veja mais detalhes em: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/beego/beedoc/blob/master/en-US/module/session.md#saving-provider-config"},"https://github.com/beego/beedoc/blob/master/en-US/module/session.md#saving-provider-config"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"defaultStorageProvider")," \xe9 o nome do servi\xe7o de armazenamento de arquivos padr\xe3o. Se voc\xea precisa usar servi\xe7os de armazenamento de arquivos, como upload de avatar, voc\xea precisa configurar um provedor de armazenamento e aplic\xe1-lo em sua aplica\xe7\xe3o. Veja ",(0,n.kt)("a",{parentName:"li",href:"/docs/provider/storage/overview"},(0,n.kt)("strong",{parentName:"a"},"armazenamento"))," para detalhes."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"isCloudIntranet")," \xe9 usado para identificar se o endpoint do seu provedor \xe9 um endpoint de intranet."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"authState")," \xe9 o nome da aplica\xe7\xe3o de autoriza\xe7\xe3o. Este par\xe2metro ser\xe1 verificado ao fazer login."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"socks5Proxy")," \xe9 o endere\xe7o IP do servidor proxy SOCKS. Defina a porta do proxy porque temos servi\xe7os relacionados ao Google ou usamos ",(0,n.kt)("inlineCode",{parentName:"li"},"Google"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"GitHub"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"Facebook"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"LinkedIn")," ou ",(0,n.kt)("inlineCode",{parentName:"li"},"Steam")," como Provedores OAuth, que podem ser restritos pela rede em algumas \xe1reas."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"initScore")," \xe9 a pontua\xe7\xe3o inicial de cada usu\xe1rio. Cada usu\xe1rio tem um atributo de pontua\xe7\xe3o. A pontua\xe7\xe3o \xe9 usada pelo ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/casbin/casnode"},(0,n.kt)("strong",{parentName:"a"},"Casnode"))," e n\xe3o controla nada no Casdoor."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"logPostOnly")," \xe9 usado para determinar se apenas o m\xe9todo post \xe9 usado para adicionar um registro."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"origin")," \xe9 o nome de dom\xednio do backend de origem."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"staticBaseUrl")," \xe9 o endere\xe7o da imagem est\xe1tica usada quando o sistema inicializa o banco de dados."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"enableGzip")," aceitar\xe1 e responder\xe1 com codifica\xe7\xe3o gzip se o cabe\xe7alho da solicita\xe7\xe3o incluir ",(0,n.kt)("inlineCode",{parentName:"li"},"Accept-Encoding=gzip"),".")),(0,n.kt)("h3",{id:"via-vari\xe1veis-de-ambiente"},"Via Vari\xe1veis de Ambiente"),(0,n.kt)("p",null,"Todos os itens de configura\xe7\xe3o definidos pelo Casdoor no arquivo ini mencionado acima podem ser configurados via vari\xe1veis de ambiente, bem como alguns dos itens de configura\xe7\xe3o do beego (httpport, appname)."),(0,n.kt)("p",null,"Por exemplo, quando voc\xea tenta iniciar o Casdoor, voc\xea pode usar algo assim para passar a configura\xe7\xe3o via vari\xe1veis de ambiente:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"appname=casbin go run main.go\n")),(0,n.kt)("p",null,"Al\xe9m disso, derivativos de ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," tamb\xe9m s\xe3o um m\xe9todo poss\xedvel. Os nomes das vari\xe1veis ambientais devem corresponder exatamente aos nomes que voc\xea deseja usar no arquivo ini."),(0,n.kt)("p",null,"Observa\xe7\xe3o: configura\xe7\xf5es em vari\xe1veis ambientais podem substituir as configura\xe7\xf5es no arquivo ini."),(0,n.kt)("h2",{id:"executar"},"Executar"),(0,n.kt)("p",null,"Atualmente, existem dois m\xe9todos para iniciar, e voc\xea pode escolher um de acordo com sua situa\xe7\xe3o."),(0,n.kt)("h3",{id:"modo-de-desenvolvimento"},"Modo de Desenvolvimento"),(0,n.kt)("h4",{id:"backend"},"Backend"),(0,n.kt)("p",null,"O backend Go do Casdoor roda na porta 8000 por padr\xe3o. Voc\xea pode iniciar o backend Go com o seguinte comando:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"go run main.go\n")),(0,n.kt)("p",null,"Depois que o servidor estiver rodando com sucesso, voc\xea pode iniciar a parte do frontend."),(0,n.kt)("h4",{id:"frontend"},"Frontend"),(0,n.kt)("p",null,"O frontend do Casdoor \xe9 um projeto muito cl\xe1ssico ",(0,n.kt)("a",{parentName:"p",href:"https://create-react-app.dev/"},(0,n.kt)("strong",{parentName:"a"},"Create-React-App (CRA)")),". Ele roda na porta ",(0,n.kt)("inlineCode",{parentName:"p"},"7001")," por padr\xe3o. Use os seguintes comandos para executar o frontend:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd web\nyarn install\nyarn start\n")),(0,n.kt)("p",null,"Visite ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:7001"},(0,n.kt)("strong",{parentName:"a"},"http://localhost:7001"))," no seu navegador. Fa\xe7a login no painel do Casdoor com a conta de administrador global padr\xe3o: ",(0,n.kt)("inlineCode",{parentName:"p"},"built-in/admin"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,n.kt)("h3",{id:"modo-de-produ\xe7\xe3o"},"Modo de Produ\xe7\xe3o"),(0,n.kt)("h4",{id:"backend-1"},"Backend"),(0,n.kt)("p",null,"Compile o c\xf3digo backend do Casdoor Go em um execut\xe1vel e inicie-o."),(0,n.kt)("p",null,"Para Linux:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"go build\n./casdoor\n")),(0,n.kt)("p",null,"Para Windows:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"go build\ncasdoor.exe\n")),(0,n.kt)("h4",{id:"frontend-1"},"Frontend"),(0,n.kt)("p",null,"Compile o c\xf3digo frontend do Casdoor em recursos est\xe1ticos (arquivos .html, .js, .css):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd web\nyarn install\nyarn build\n")),(0,n.kt)("p",null,"Visite ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:8000"},(0,n.kt)("strong",{parentName:"a"},"http://localhost:8000"))," no seu navegador. Fa\xe7a login no painel do Casdoor com a conta de administrador global padr\xe3o: ",(0,n.kt)("inlineCode",{parentName:"p"},"built-in/admin"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Para usar outra porta, por favor edite ",(0,n.kt)("inlineCode",{parentName:"p"},"conf/app.conf")," e modifique ",(0,n.kt)("inlineCode",{parentName:"p"},"httpport"),", depois reinicie o backend Go.")),(0,n.kt)("admonition",{title:"Detalhes da Porta do Casdoor",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"No ambiente ",(0,n.kt)("strong",{parentName:"p"},"dev"),", o frontend \xe9 executado por ",(0,n.kt)("inlineCode",{parentName:"p"},"yarn run")," na porta 7001, ent\xe3o se voc\xea quiser ir para a p\xe1gina de login do Casdoor, voc\xea precisa configurar o link do Casdoor como ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"http://localhost:7001"},"http://localhost:7001")),"."),(0,n.kt)("p",{parentName:"admonition"},"No ambiente ",(0,n.kt)("strong",{parentName:"p"},"prod"),", os arquivos do frontend s\xe3o primeiro compilados por ",(0,n.kt)("inlineCode",{parentName:"p"},"yarn build")," e servidos na porta 8000, ent\xe3o se voc\xea quiser ir para a p\xe1gina de login do Casdoor, voc\xea precisa configurar o link do Casdoor como ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://your-casdoor-url.com:8000"},"https://your-casdoor-url.com:8000"))," (Se voc\xea estiver usando um proxy reverso, voc\xea precisa configurar o link como ",(0,n.kt)("strong",{parentName:"p"},"seu dom\xednio"),")."),(0,n.kt)("h4",{parentName:"admonition",id:"pegue-nosso-f\xf3rum-oficial-casnode-como-exemplo"},"Pegue Nosso F\xf3rum Oficial Casnode como Exemplo"),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("a",{parentName:"p",href:"https://casnode.org"},"Casnode")," usa o Casdoor para lidar com autentica\xe7\xe3o."),(0,n.kt)("p",{parentName:"admonition"},"Quando estamos testando o Casnode no ambiente ",(0,n.kt)("strong",{parentName:"p"},"dev"),", configuramos o ",(0,n.kt)("inlineCode",{parentName:"p"},"serverUrl")," como ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:7001"},"http://localhost:7001"),", ent\xe3o quando testamos a funcionalidade de login e cadastro usando o Casdoor, ele ir\xe1 para o localhost 7001, que \xe9 a porta do Casdoor."),(0,n.kt)("p",{parentName:"admonition"},"E quando colocamos o Casnode no ambiente ",(0,n.kt)("strong",{parentName:"p"},"prod"),", configuramos o ",(0,n.kt)("inlineCode",{parentName:"p"},"serverUrl")," como ",(0,n.kt)("a",{parentName:"p",href:"https://door.casdoor.com"},"https://door.casdoor.com"),", ent\xe3o os usu\xe1rios podem se inscrever ou se cadastrar usando o Casdoor."),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("img",{alt:"Exemplo de Casnode",src:o(4621).Z,width:"1108",height:"281"}))))}m.isMDXComponent=!0},4621:(e,a,o)=>{o.d(a,{Z:()=>t});const t=o.p+"assets/images/casnodeexample-06892ab1a66c35c830aa85d51c8f75ed.png"}}]);