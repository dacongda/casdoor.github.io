"use strict";(self.webpackChunkcasdoor_website=self.webpackChunkcasdoor_website||[]).push([[1267],{3905:(t,a,e)=>{e.d(a,{Zo:()=>p,kt:()=>g});var n=e(67294);function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach((function(a){i(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function r(t,a){if(null==t)return{};var e,n,i=function(t,a){if(null==t)return{};var e,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)e=o[n],a.indexOf(e)>=0||(i[e]=t[e]);return i}(t,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)e=o[n],a.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}var s=n.createContext({}),c=function(t){var a=n.useContext(s),e=a;return t&&(e="function"==typeof t?t(a):l(l({},a),t)),e},p=function(t){var a=c(t.components);return n.createElement(s.Provider,{value:a},t.children)},d={inlineCode:"code",wrapper:function(t){var a=t.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(t,a){var e=t.components,i=t.mdxType,o=t.originalType,s=t.parentName,p=r(t,["components","mdxType","originalType","parentName"]),u=c(e),g=i,m=u["".concat(s,".").concat(g)]||u[g]||d[g]||o;return e?n.createElement(m,l(l({ref:a},p),{},{components:e})):n.createElement(m,l({ref:a},p))}));function g(t,a){var e=arguments,i=a&&a.mdxType;if("string"==typeof t||i){var o=e.length,l=new Array(o);l[0]=u;var r={};for(var s in a)hasOwnProperty.call(a,s)&&(r[s]=a[s]);r.originalType=t,r.mdxType="string"==typeof t?t:i,l[1]=r;for(var c=2;c<o;c++)l[c]=e[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,e)}u.displayName="MDXCreateElement"},69981:(t,a,e)=>{e.r(a),e.d(a,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var n=e(87462),i=(e(67294),e(3905));const o={title:"Aliyun IDaaS",description:"Using Aliyun IDaaS to authenticate users",keywords:["Aliyun IDaaS"]},l=void 0,r={unversionedId:"provider/saml/aliyun",id:"provider/saml/aliyun",title:"Aliyun IDaaS",description:"Using Aliyun IDaaS to authenticate users",source:"@site/docs/provider/saml/aliyun.md",sourceDirName:"provider/saml",slug:"/provider/saml/aliyun",permalink:"/docs/provider/saml/aliyun",draft:!1,editUrl:"https://github.com/casdoor/casdoor-website/edit/master/docs/provider/saml/aliyun.md",tags:[],version:"current",lastUpdatedBy:"YunShu",lastUpdatedAt:1667395331,formattedLastUpdatedAt:"Nov 2, 2022",frontMatter:{title:"Aliyun IDaaS",description:"Using Aliyun IDaaS to authenticate users",keywords:["Aliyun IDaaS"]},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/provider/saml/overview"},next:{title:"Keycloak",permalink:"/docs/provider/saml/keycloak"}},s={},c=[{value:"Create SAML application in Aliyun IDaaS",id:"create-saml-application-in-aliyun-idaas",level:2},{value:"Account authorization &amp; association",id:"account-authorization--association",level:2},{value:"Export IDaaS Metadata",id:"export-idaas-metadata",level:2},{value:"Configure in Casdoor",id:"configure-in-casdoor",level:2},{value:"Modify SAML application in Aliyun IDaaS",id:"modify-saml-application-in-aliyun-idaas",level:2},{value:"Validate the effect",id:"validate-the-effect",level:2}],p={toc:c};function d(t){let{components:a,...o}=t;return(0,i.kt)("wrapper",(0,n.Z)({},p,o,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"create-saml-application-in-aliyun-idaas"},"Create SAML application in Aliyun IDaaS"),(0,i.kt)("p",null,"Login to the ",(0,i.kt)("a",{parentName:"p",href:"https://account.aliyun.com/"},"Aliyun management console"),", search and go to the Application Indentity Service (IDentity-as-a-Service, IDaaS)."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Aliyun IDaaS",src:e(74546).Z,width:"2560",height:"1371"})),(0,i.kt)("p",null,"Click ",(0,i.kt)("strong",{parentName:"p"},"EIAM Instance List")," and open the free version."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Aliyun EIAM",src:e(55711).Z,width:"2557",height:"613"})),(0,i.kt)("p",null,"An instance will be created and run automatically after opening. Click on the instance name or the ",(0,i.kt)("strong",{parentName:"p"},"Manage")," button to enter the IDaaS management console."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Aliyun EIAM List",src:e(72192).Z,width:"2560",height:"580"})),(0,i.kt)("p",null,"After entering the IDaaS management console, click ",(0,i.kt)("strong",{parentName:"p"},"Add Application"),", search for ",(0,i.kt)("strong",{parentName:"p"},"SAML"),", and click ",(0,i.kt)("strong",{parentName:"p"},"Add Application"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Add Aliyun SAML",src:e(56535).Z,width:"2560",height:"1363"})),(0,i.kt)("p",null,"Click ",(0,i.kt)("strong",{parentName:"p"},"Add SigningKey"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Add Signing Key",src:e(71800).Z,width:"1279",height:"412"})),(0,i.kt)("p",null,"Fill in all required information and submit."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Fill in Signing Key",src:e(95535).Z,width:"1023",height:"797"})),(0,i.kt)("p",null,"Select the added SigningKey."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Select added Signing Key",src:e(59940).Z,width:"1279",height:"369"})),(0,i.kt)("p",null,"Fill in all the required information below and submit."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"IDP IdentityId: Keep the same as Issuer URL in Casdoor."),(0,i.kt)("li",{parentName:"ul"},"SP Entity ID & SP ACS URL(SSO Location): Now fill in whatever you want. After completing the configuration of Casdoor, you need to come to modify."),(0,i.kt)("li",{parentName:"ul"},"Assertion Attribute: Directly fill in as username."),(0,i.kt)("li",{parentName:"ul"},"Account Association Mode: Account Association")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Update information of Signing Key",src:e(50862).Z,width:"1265",height:"1289"})),(0,i.kt)("h2",{id:"account-authorization--association"},"Account authorization & association"),(0,i.kt)("p",null,"After the application is successfully added, an authorization prompt will pop up. Do not authorize it now, add an account and then authorize it."),(0,i.kt)("p",null,"Go to ",(0,i.kt)("strong",{parentName:"p"},"Organizations and Groups")," and click on ",(0,i.kt)("strong",{parentName:"p"},"New Account"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Add account",src:e(71182).Z,width:"2560",height:"954"})),(0,i.kt)("p",null,"Fill in all required information and submit."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Fill in account information",src:e(76478).Z,width:"1279",height:"1125"})),(0,i.kt)("p",null,"Go to ",(0,i.kt)("strong",{parentName:"p"},"Application Authorization"),", select the accounts you want to authorize and click ",(0,i.kt)("strong",{parentName:"p"},"Save"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Account authorizationn",src:e(67306).Z,width:"2558",height:"1112"})),(0,i.kt)("p",null,"Go to the ",(0,i.kt)("strong",{parentName:"p"},"Application List"),", click ",(0,i.kt)("strong",{parentName:"p"},"View application sub-accounts"),", and then click ",(0,i.kt)("strong",{parentName:"p"},"Add account association"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"View sub-account",src:e(82475).Z,width:"2560",height:"1257"}),"\n",(0,i.kt)("img",{alt:"Add sub-account",src:e(3150).Z,width:"2559",height:"913"})),(0,i.kt)("p",null,"Fill in the primary and sub accounts that need to be associated and click ",(0,i.kt)("strong",{parentName:"p"},"Save"),". "),(0,i.kt)("p",null,"The primary account exists in IDaaS, and the sub account is the ID of the user in Casdoor."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Associate",src:e(6695).Z,width:"1023",height:"366"})),(0,i.kt)("h2",{id:"export-idaas-metadata"},"Export IDaaS Metadata"),(0,i.kt)("p",null,"Go to the ",(0,i.kt)("strong",{parentName:"p"},"Application List"),", click ",(0,i.kt)("strong",{parentName:"p"},"View Application Details")," and click ",(0,i.kt)("strong",{parentName:"p"},"Export IDaaS SAML Metadadta"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Export",src:e(18367).Z,width:"2560",height:"1368"})),(0,i.kt)("h2",{id:"configure-in-casdoor"},"Configure in Casdoor"),(0,i.kt)("p",null,"Create a new provider in Casdoor."),(0,i.kt)("p",null,"Select category as ",(0,i.kt)("strong",{parentName:"p"},"SAML"),", type as ",(0,i.kt)("strong",{parentName:"p"},"Aliyun IdaaS"),". Copy the content of metadata and paste it to the ",(0,i.kt)("strong",{parentName:"p"},"Metadata")," input. The values of ",(0,i.kt)("strong",{parentName:"p"},"Endpoint"),", ",(0,i.kt)("strong",{parentName:"p"},"IdP")," and ",(0,i.kt)("strong",{parentName:"p"},"Issuer URL")," will be generated automatically after clicking the ",(0,i.kt)("strong",{parentName:"p"},"Parse")," button."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Casdoor provider",src:e(56199).Z,width:"2506",height:"1321"})),(0,i.kt)("p",null,"Copy the ",(0,i.kt)("strong",{parentName:"p"},"SP ACS URL")," and the ",(0,i.kt)("strong",{parentName:"p"},"SP Entity ID")," and click the ",(0,i.kt)("strong",{parentName:"p"},"Save")," button."),(0,i.kt)("p",null,"Edit the application you want to configure in Casdoor. Select the provider just added and click the button ",(0,i.kt)("strong",{parentName:"p"},"Save"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Add provider for app",src:e(33258).Z,width:"2478",height:"301"})),(0,i.kt)("h2",{id:"modify-saml-application-in-aliyun-idaas"},"Modify SAML application in Aliyun IDaaS"),(0,i.kt)("p",null,"Disable the application and then click ",(0,i.kt)("strong",{parentName:"p"},"Modify Application"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Modify SAML app",src:e(44533).Z,width:"2560",height:"1292"})),(0,i.kt)("p",null,"Fill in ",(0,i.kt)("strong",{parentName:"p"},"SP Entity ID")," and ",(0,i.kt)("strong",{parentName:"p"},"SP ACS URL(SSO Location)")," with the content copied in Casdoor. Submit and enable application."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Modify SAML app",src:e(82977).Z,width:"1279",height:"1292"})),(0,i.kt)("h2",{id:"validate-the-effect"},"Validate the effect"),(0,i.kt)("p",null,"Go to the application you just configured and you can find that there is an icon in the login page. "),(0,i.kt)("p",null,"Click the icon and jump to the Aliyun IDaaS login page, and then successfully login to the Casdoor after authentication."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Casdoor login",src:e(74748).Z,width:"1280",height:"720"})))}d.isMDXComponent=!0},74546:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun-992b43a7a8fdbf90fd358b4da9c8e9ec.png"},71182:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_account-285edd1b442436d4fb4fefb76a0737d4.png"},76478:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_account_add-f2b3dafb46327a860a1e95b5d139da98.png"},67306:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_account_authorization-4623eb484d6cc21603ad26936e60afe2.png"},56199:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_casdoor-eb2fad273d2a8951ee67f8bfd20129a5.png"},74748:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_casdoor_login-df1d8b326a0ba19f444f10d333f123c6.gif"},33258:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_casdoor_provider-7ec6df1c870a12b8cf80bcf85567f2e9.png"},55711:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_eiam-cf61443fc842d0e918c9a683e613c764.png"},72192:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_eiam_list-65dc3f1ad30fc6cd6b692b7f2ee0637b.png"},56535:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_add-4a967b0ed45849685dd4becdf1e37ca2.png"},18367:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_metadata-7e877a6a45deafe651512a7977e32541.png"},44533:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_modify-db11ad4216810ed6d520d00307f73d33.png"},82977:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_modify_input-edf7e66cfdb7bc710e365aaaaca79afc.png"},71800:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_signingkey-288caed7e1e77a400ab5ff66058dddb8.png"},95535:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_signingkey_input-e559b4a9a7fe7ff08f684805a6a2f113.png"},59940:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_signingkey_select-2707f859ca9702f1f63436d15a8c5aed.png"},50862:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_saml_signingkey_update-105ebaaa45f0d4d572143df8aa35d418.png"},3150:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_subaccount_add-f873ad63c564128204e905d392810fd1.png"},6695:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_subaccount_input-235e250b0a7dcec37832100faaa61e09.png"},82475:(t,a,e)=>{e.d(a,{Z:()=>n});const n=e.p+"assets/images/aliyun_subaccount_view-2b5b20efb5c486ec94c9b68783b861f5.png"}}]);